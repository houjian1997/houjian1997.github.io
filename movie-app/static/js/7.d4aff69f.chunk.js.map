{"version":3,"sources":["scripts/components/head/index.js","scripts/components/mlist/index.js","scripts/views/movie/index.js"],"names":["Item","Popover","myImg","src","className","alt","Head","gotoSearch","history","push","back","show","title","go","props","dispatch","clearSearchList","onSelect","opt","setState","visible","selected","value","showActionSheet","handleVisibleChange","BUTTONS","ActionSheet","showActionSheetWithOptions","options","cancelButtonIndex","length","destructiveButtonIndex","message","maskClosable","buttonIndex","clicked","state","this","search","pop","mode","icon","type","rightContent","key","style","marginRight","onClick","mask","overlayClassName","overlayStyle","color","overlay","data-seed","whiteSpace","align","overflow","adjustY","adjustX","offset","onVisibleChange","height","padding","display","alignItems","backgroundColor","onLeftClick","React","Component","connect","searchList","getIn","MvList","gotoCinema","e","console","log","stopPropagation","gotoMDetail","id","nm","mList","map","m","i","img","version","sc","star","showInfo","globalReleased","width","lineHeight","fontSize","position","right","top","window","event","xk","tabs","Movie","changeTab","tab","index","getHotList","url","getComingList","hotList","comingList","initialPage","tabBarUnderlineStyle","marginLeft","border","tabBarActiveTextColor","onTabClick","HotList","ComingList"],"mappings":"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","file":"static/js/7.d4aff69f.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { NavBar, Icon, Popover, ActionSheet } from 'antd-mobile';\r\nimport PropTypes from \"prop-types\";\r\nimport { history } from \"&/history\";\r\nimport { connect } from \"react-redux\";\r\nimport { clearSearchList } from \"~/actions/index\";\r\nimport \"./index.scss\";\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        searchList: state.getIn([\"data\", \"searchList\"])\r\n    }\r\n}\r\n\r\nconst Item = Popover.Item;\r\nconst myImg = src => <img src={`https://gw.alipayobjects.com/zos/rmsportal/${src}.svg`} className=\"am-icon am-icon-xs\" alt=\"\" />;\r\n\r\nclass Head extends React.Component {\r\n\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            visible: false,\r\n            selected: '',\r\n        }\r\n    }\r\n\r\n    gotoSearch = () => {\r\n        history.push(\"/search\")\r\n    }\r\n\r\n    back = (show, title) => {\r\n        if (show) {\r\n            history.go(-1)\r\n        }\r\n\r\n        if (title === \"搜索\") {\r\n            this.props.dispatch(clearSearchList())\r\n        }\r\n    }\r\n\r\n    onSelect = (opt) => {\r\n        this.setState({\r\n            visible: false,\r\n            selected: opt.props.value,\r\n        })\r\n        // console.log(opt.props.value)\r\n        if (opt.props.value == \"scan\") {\r\n            history.push(\"/scan\")\r\n        } else if (opt.props.value == \"login\") {\r\n            history.push(\"/login\")\r\n        } else if (opt.props.value == \"photo\") {\r\n            this.showActionSheet()\r\n        }\r\n    }\r\n\r\n    handleVisibleChange = (visible) => {\r\n        this.setState({\r\n            visible,\r\n        })\r\n    }\r\n\r\n    showActionSheet = () => {\r\n        const BUTTONS = [\"从手机相册选取\", \"立即拍照\"];\r\n        ActionSheet.showActionSheetWithOptions({\r\n            options: BUTTONS,\r\n            cancelButtonIndex: BUTTONS.length - 1,\r\n            destructiveButtonIndex: BUTTONS.length - 2,\r\n            message: '拍照',\r\n            maskClosable: true,\r\n            'data-seed': 'logId',\r\n        },\r\n            (buttonIndex) => {\r\n                this.setState({ clicked: BUTTONS[buttonIndex] });\r\n            });\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            title,\r\n            show,\r\n            search,\r\n            pop\r\n        } = this.props;\r\n        return (\r\n            <div>\r\n                <NavBar\r\n                    mode=\"dark\"\r\n                    icon={show && <Icon type=\"left\" />}\r\n                    rightContent={[\r\n                        search && <Icon\r\n                            key=\"0\"\r\n                            type=\"search\"\r\n                            style={{ marginRight: '16px' }}\r\n                            onClick={this.gotoSearch}\r\n                        />,\r\n                        pop && <Popover\r\n                            mask\r\n                            key={1}\r\n                            overlayClassName=\"fortest\"\r\n                            overlayStyle={{ color: 'currentColor' }}\r\n                            visible={this.state.visible}\r\n                            overlay={[\r\n                                (<Item key=\"4\" value=\"scan\" icon={myImg('tOtXhkIWzwotgGSeptou')} data-seed=\"logId\">扫一扫</Item>),\r\n                                (<Item key=\"5\" value=\"photo\" icon={myImg('PKAgAqZWJVNwKsAJSmXd')} style={{ whiteSpace: 'nowrap' }}>拍照</Item>),\r\n                                (<Item key=\"6\" value=\"login\" icon={myImg('uQIYTFeRrjPELImDRrPt')}>\r\n                                    <span style={{ marginRight: 5 }}>登录</span>\r\n                                </Item>),\r\n                            ]}\r\n                            align={{\r\n                                overflow: { adjustY: 0, adjustX: 0 },\r\n                                offset: [-10, 0],\r\n                            }}\r\n                            onVisibleChange={this.handleVisibleChange}\r\n                            onSelect={this.onSelect}\r\n                        >\r\n                            <div style={{\r\n                                height: '100%',\r\n                                padding: '0 15px',\r\n                                marginRight: '-15px',\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                            }}\r\n                            >\r\n                                <Icon type=\"ellipsis\" />\r\n                            </div>\r\n                        </Popover>\r\n                    ]}\r\n                    style={{ backgroundColor: \"#d3544d\" }}\r\n                    onLeftClick={() => this.back(show, title)}\r\n                >{title}</NavBar>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nHead.propTypes = {\r\n    title: PropTypes.string,\r\n    show: PropTypes.bool,\r\n    search: PropTypes.bool,\r\n    pop: PropTypes.bool\r\n}\r\n\r\nexport default connect(mapStateToProps)(Head)","import React from \"react\";\r\nimport { Button } from \"antd-mobile\";\r\nimport { history } from \"&/history\"\r\nimport \"./index.scss\";\r\n\r\nexport default class MvList extends React.Component {\r\n    gotoCinema = (e) => {\r\n        console.log(e);\r\n        e.stopPropagation()\r\n        history.push(\"/index/cinema\")\r\n    }\r\n\r\n    gotoMDetail = (id, nm) => {\r\n        history.push(\"/mdetail/\" + id + \"/?nm=\" + nm)\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            mList\r\n        } = this.props;\r\n        // console.log(mList)\r\n\r\n        return (\r\n            <div className=\"hot-div\">\r\n                {\r\n                    mList.map((m, i) => {\r\n                        return (\r\n                            <dl key={i} className=\"hot-dl\" onClick={() => this.gotoMDetail(m.id, m.nm)}>\r\n                                <dt className=\"hot-dt\">\r\n                                    <img src={m.img} alt=\"\" className=\"hot-img\" />\r\n                                </dt>\r\n                                <dd className=\"hot-dd\">\r\n                                    <ul className=\"hot-ul\">\r\n                                        <li className=\"nm-li\">\r\n                                            <p className=\"nm\">{m.nm}</p>\r\n                                            {\r\n                                                m.version\r\n                                                && <p className=\"icon\">\r\n                                                    <span className=\"one\">3D</span>\r\n                                                    <span className=\"two\">IMAX</span>\r\n                                                </p>\r\n                                            }\r\n                                        </li>\r\n                                        {\r\n                                            (m.sc != 0)\r\n                                            && <li className=\"sc-li\">\r\n                                                <span className=\"txt-span\">观众评价</span>\r\n                                                <span className=\"pj-span\">{m.sc}</span>\r\n                                            </li>\r\n                                        }\r\n                                        {\r\n                                            (m.sc == 0)\r\n                                            && <li className=\"xk-li\">\r\n                                                <span className=\"xk-span\">{m.id}</span>\r\n                                                <span className=\"txt-span\">人想看</span>\r\n                                            </li>\r\n                                        }\r\n                                        <li className=\"star-li\">主演：{m.star}</li>\r\n                                        <li className=\"showinfo-li\">{m.showInfo}</li>\r\n                                    </ul>\r\n                                    {\r\n                                        m.globalReleased\r\n                                        && <Button\r\n                                            type=\"warning\"\r\n                                            style={{\r\n                                                width: \"0.95rem\",\r\n                                                height: \"0.52rem\",\r\n                                                lineHeight: \"0.52rem\",\r\n                                                fontSize: \"0.2rem\",\r\n                                                position: \"absolute\",\r\n                                                right: 0,\r\n                                                top: \"0.64rem\"\r\n                                            }}\r\n                                            onClick={() => this.gotoCinema(window.event)}>购票</Button>\r\n                                    }\r\n                                    {\r\n                                        !m.globalReleased\r\n                                        && <Button\r\n                                            type=\"primary\"\r\n                                            style={{\r\n                                                width: \"0.95rem\",\r\n                                                height: \"0.52rem\",\r\n                                                lineHeight: \"0.52rem\",\r\n                                                fontSize: \"0.2rem\",\r\n                                                position: \"absolute\",\r\n                                                right: 0,\r\n                                                top: \"0.64rem\"\r\n                                            }}\r\n                                            onClick={() => this.gotoCinema(window.event)}\r\n                                        >预售</Button>\r\n                                    }\r\n                                    {\r\n                                        (m.xk == \"xk\")\r\n                                        && <Button\r\n                                            type=\"warning\"\r\n                                            style={{\r\n                                                width: \"0.95rem\",\r\n                                                height: \"0.52rem\",\r\n                                                lineHeight: \"0.52rem\",\r\n                                                fontSize: \"0.2rem\",\r\n                                                position: \"absolute\",\r\n                                                right: 0,\r\n                                                top: \"0.64rem\",\r\n                                            }}\r\n                                            onClick={() => this.gotoCinema(window.event)}\r\n                                        >想看</Button>\r\n                                    }\r\n                                </dd>\r\n                            </dl>\r\n                        )\r\n                    })\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}","import React from \"react\";\r\nimport Head from \"~/components/head/index\";\r\nimport MvList from \"~/components/mlist/index\";\r\nimport { Tabs, WhiteSpace } from \"antd-mobile\";\r\nimport { connect } from \"react-redux\";\r\nimport { getHotList, getComingList } from \"~/actions/index\";\r\nimport \"./index.scss\";\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        hotList: state.getIn([\"data\", \"hotList\"]),\r\n        comingList: state.getIn([\"data\", \"comingList\"])\r\n    }\r\n}\r\n\r\nconst tabs = [\r\n    { title: \"正在热映\" },\r\n    { title: \"即将上映\" },\r\n];\r\n\r\nclass Movie extends React.Component {\r\n    componentDidMount() {\r\n        if (!this.props.hotList.length) {\r\n            this.props.dispatch(getHotList({ url: \"/react/getHotList\" }))\r\n        }\r\n    }\r\n\r\n    changeTab = (tab, index) => {\r\n        if (index == 0) {\r\n            this.props.dispatch(getHotList({ url: \"/react/getHotList\" }))\r\n        } else {\r\n            this.props.dispatch(getComingList({ url: \"/react/getComingList\" }))\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            hotList,\r\n            comingList\r\n        } = this.props;\r\n        // console.log(hotList)\r\n\r\n        return (\r\n            <div>\r\n                <Head title=\"电影\" show={false} search={true} pop={true} />\r\n                <Tabs tabs={tabs}\r\n                    initialPage={0}\r\n                    tabBarUnderlineStyle={{\r\n                        width: \"1.5rem\",\r\n                        marginLeft: \"1.1rem\",\r\n                        border: \"0.02rem solid #d3544d\"\r\n                    }}\r\n                    tabBarActiveTextColor=\"#d3544d\"\r\n                    onTabClick={(tab, index) => this.changeTab(tab, index)}\r\n                >\r\n                    <div style={{\r\n                        backgroundColor: '#fff'\r\n                    }}>\r\n                        <HotList mList={hotList} />\r\n                    </div>\r\n                    <div style={{\r\n                        backgroundColor: '#fff'\r\n                    }}\r\n                    >\r\n                        <ComingList mList={comingList} />\r\n                    </div>\r\n                </Tabs>\r\n                <WhiteSpace />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nclass HotList extends React.Component {\r\n    render() {\r\n        const {\r\n            mList\r\n        } = this.props;\r\n\r\n        return (\r\n            <MvList mList={mList} />\r\n        )\r\n    }\r\n}\r\n\r\nclass ComingList extends React.Component {\r\n    render() {\r\n        const {\r\n            mList\r\n        } = this.props;\r\n\r\n        return (\r\n            <MvList mList={mList} />\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Movie)"],"sourceRoot":""}