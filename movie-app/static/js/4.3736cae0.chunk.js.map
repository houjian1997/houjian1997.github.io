{"version":3,"sources":["scripts/components/head/index.js","scripts/components/list/index.js","scripts/components/item/index.js","scripts/views/detail/index.js"],"names":["Item","Popover","myImg","src","className","alt","Head","gotoSearch","history","push","back","show","title","go","props","dispatch","clearSearchList","onSelect","opt","setState","visible","selected","value","showActionSheet","handleVisibleChange","BUTTONS","ActionSheet","showActionSheetWithOptions","options","cancelButtonIndex","length","destructiveButtonIndex","message","maskClosable","buttonIndex","clicked","state","this","search","pop","mode","icon","type","rightContent","key","style","marginRight","onClick","mask","overlayClassName","overlayStyle","color","overlay","data-seed","whiteSpace","align","overflow","adjustY","adjustX","offset","onVisibleChange","height","padding","display","alignItems","backgroundColor","onLeftClick","React","Component","connect","searchList","getIn","List","gotoDetail","_id","refreshing","down","document","documentElement","clientHeight","data","movies","keys","damping","ref","el","ptr","indicator","deactivate","direction","onRefresh","moviesReverse","searchListReverse","setTimeout","map","item","i","poster","rate","casts","cast","name","duration","detail","movieTypes","types","pubdate","summary","Detail","getDetail","url","params","match","getRecommend","recommend","console","log","width","video","controls","preload","diaplay"],"mappings":"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","file":"static/js/4.3736cae0.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { NavBar, Icon, Popover, ActionSheet } from 'antd-mobile';\r\nimport PropTypes from \"prop-types\";\r\nimport { history } from \"&/history\";\r\nimport { connect } from \"react-redux\";\r\nimport { clearSearchList } from \"~/actions/index\";\r\nimport \"./index.scss\";\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        searchList: state.getIn([\"data\", \"searchList\"])\r\n    }\r\n}\r\n\r\nconst Item = Popover.Item;\r\nconst myImg = src => <img src={`https://gw.alipayobjects.com/zos/rmsportal/${src}.svg`} className=\"am-icon am-icon-xs\" alt=\"\" />;\r\n\r\nclass Head extends React.Component {\r\n\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            visible: false,\r\n            selected: '',\r\n        }\r\n    }\r\n\r\n    gotoSearch = () => {\r\n        history.push(\"/search\")\r\n    }\r\n\r\n    back = (show, title) => {\r\n        if (show) {\r\n            history.go(-1)\r\n        }\r\n\r\n        if (title === \"搜索\") {\r\n            this.props.dispatch(clearSearchList())\r\n        }\r\n    }\r\n\r\n    onSelect = (opt) => {\r\n        this.setState({\r\n            visible: false,\r\n            selected: opt.props.value,\r\n        })\r\n        // console.log(opt.props.value)\r\n        if (opt.props.value == \"scan\") {\r\n            history.push(\"/scan\")\r\n        } else if (opt.props.value == \"login\") {\r\n            history.push(\"/login\")\r\n        } else if (opt.props.value == \"photo\") {\r\n            this.showActionSheet()\r\n        }\r\n    }\r\n\r\n    handleVisibleChange = (visible) => {\r\n        this.setState({\r\n            visible,\r\n        })\r\n    }\r\n\r\n    showActionSheet = () => {\r\n        const BUTTONS = [\"从手机相册选取\", \"立即拍照\"];\r\n        ActionSheet.showActionSheetWithOptions({\r\n            options: BUTTONS,\r\n            cancelButtonIndex: BUTTONS.length - 1,\r\n            destructiveButtonIndex: BUTTONS.length - 2,\r\n            message: '拍照',\r\n            maskClosable: true,\r\n            'data-seed': 'logId',\r\n        },\r\n            (buttonIndex) => {\r\n                this.setState({ clicked: BUTTONS[buttonIndex] });\r\n            });\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            title,\r\n            show,\r\n            search,\r\n            pop\r\n        } = this.props;\r\n        return (\r\n            <div>\r\n                <NavBar\r\n                    mode=\"dark\"\r\n                    icon={show && <Icon type=\"left\" />}\r\n                    rightContent={[\r\n                        search && <Icon\r\n                            key=\"0\"\r\n                            type=\"search\"\r\n                            style={{ marginRight: '16px' }}\r\n                            onClick={this.gotoSearch}\r\n                        />,\r\n                        pop && <Popover\r\n                            mask\r\n                            key={1}\r\n                            overlayClassName=\"fortest\"\r\n                            overlayStyle={{ color: 'currentColor' }}\r\n                            visible={this.state.visible}\r\n                            overlay={[\r\n                                (<Item key=\"4\" value=\"scan\" icon={myImg('tOtXhkIWzwotgGSeptou')} data-seed=\"logId\">扫一扫</Item>),\r\n                                (<Item key=\"5\" value=\"photo\" icon={myImg('PKAgAqZWJVNwKsAJSmXd')} style={{ whiteSpace: 'nowrap' }}>拍照</Item>),\r\n                                (<Item key=\"6\" value=\"login\" icon={myImg('uQIYTFeRrjPELImDRrPt')}>\r\n                                    <span style={{ marginRight: 5 }}>登录</span>\r\n                                </Item>),\r\n                            ]}\r\n                            align={{\r\n                                overflow: { adjustY: 0, adjustX: 0 },\r\n                                offset: [-10, 0],\r\n                            }}\r\n                            onVisibleChange={this.handleVisibleChange}\r\n                            onSelect={this.onSelect}\r\n                        >\r\n                            <div style={{\r\n                                height: '100%',\r\n                                padding: '0 15px',\r\n                                marginRight: '-15px',\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                            }}\r\n                            >\r\n                                <Icon type=\"ellipsis\" />\r\n                            </div>\r\n                        </Popover>\r\n                    ]}\r\n                    style={{ backgroundColor: \"#d3544d\" }}\r\n                    onLeftClick={() => this.back(show, title)}\r\n                >{title}</NavBar>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nHead.propTypes = {\r\n    title: PropTypes.string,\r\n    show: PropTypes.bool,\r\n    search: PropTypes.bool,\r\n    pop: PropTypes.bool\r\n}\r\n\r\nexport default connect(mapStateToProps)(Head)","import React from \"react\";\r\nimport { history } from \"&/history\";\r\nimport { PullToRefresh } from \"antd-mobile\";\r\nimport { connect } from \"react-redux\";\r\nimport { moviesReverse, searchListReverse } from \"~/actions/index\";\r\nimport \"./index.scss\";\r\n\r\nclass List extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            refreshing: false,\r\n            down: true,\r\n            height: document.documentElement.clientHeight,\r\n            data: [],\r\n        };\r\n    }\r\n\r\n    gotoDetail = (_id, title) => {\r\n        history.push(\"/detail/\" + _id + \"?title=\" + title)\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            movies,\r\n            keys\r\n        } = this.props;\r\n\r\n        return (\r\n            <div className=\"movie-box\">\r\n                <PullToRefresh\r\n                    damping={60}\r\n                    ref={el => this.ptr = el}\r\n                    style={{\r\n                        height: this.state.height,\r\n                        overflow: 'auto',\r\n                    }}\r\n                    indicator={this.state.down ? {} : { deactivate: '上拉可以刷新' }}\r\n                    direction={this.state.down ? 'down' : 'up'}\r\n                    refreshing={this.state.refreshing}\r\n                    onRefresh={() => {\r\n                        this.setState({ refreshing: true });\r\n                        if (keys == \"home\") {\r\n                            this.props.dispatch(moviesReverse());\r\n                        } else if (keys == \"search\") {\r\n                            this.props.dispatch(searchListReverse());\r\n                        }\r\n                        setTimeout(() => {\r\n                            this.setState({ refreshing: false });\r\n                        }, 1000);\r\n                    }}\r\n                >\r\n                    {\r\n                        movies && movies.map((item, i) => {\r\n                            return (\r\n                                <dl key={i} className=\"item-dl\">\r\n                                    <dt>\r\n                                        <img src={item.poster} alt=\"\" />\r\n                                    </dt>\r\n                                    <dd>\r\n                                        <ul onClick={() => this.gotoDetail(item._id, item.title)}>\r\n                                            <li className=\"title-li\">{item.title}</li>\r\n                                            <li className=\"rate-li\">观众评价：<span>{item.rate}</span></li>\r\n                                            <li className=\"name-li\">主演:{item.casts.map((cast) => {\r\n                                                cast.name = cast.name + \"   \";\r\n                                                return cast.name;\r\n                                            })}</li>\r\n                                            <li className=\"time-li\">时长：{item.duration}</li>\r\n                                        </ul>\r\n                                    </dd>\r\n                                </dl>\r\n                            )\r\n                        })\r\n                    }\r\n                </PullToRefresh>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect()(List)","import React from \"react\";\r\nimport \"./index.scss\"\r\n\r\nexport default class Item extends React.Component {\r\n    render() {\r\n        const {\r\n            detail\r\n        } = this.props\r\n        return (\r\n            <div className=\"content\">\r\n                <p className=\"title\">{detail.title}</p>\r\n                <p className=\"rate\">\r\n                    <span>{detail.rate}</span>\r\n                    <span>\r\n                        {\r\n                            detail.movieTypes && detail.movieTypes.map((item) => {\r\n                                var types = \"\";\r\n                                types += item + \" \";\r\n                                return types;\r\n                            })\r\n                        }\r\n                    </span>\r\n                    <span>{detail.duration}</span>\r\n                </p>\r\n                <p className=\"time\">{detail.pubdate}</p>\r\n                <p className=\"jj\">电影简介：{detail.summary}</p>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React from \"react\";\r\nimport Head from \"~/components/head/index\";\r\nimport Item from \"~/components/item/index\";\r\nimport List from \"~/components/list/index\";\r\nimport { connect } from \"react-redux\";\r\nimport { getDetail, getRecommend } from \"~/actions/index\";\r\nimport \"./index.scss\";\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        detail: state.getIn([\"data\", \"detail\"]),\r\n        recommend: state.getIn([\"data\", \"recommend\"])\r\n    }\r\n}\r\n\r\nclass Detail extends React.Component {\r\n    componentDidMount() {\r\n        this.props.dispatch(getDetail({\r\n            url: \"/react/getDetail\",\r\n            params: { _id: this.props.match.params._id }\r\n        }))\r\n        this.props.dispatch(getRecommend({\r\n            url: \"/react/recommend\",\r\n            params: { _id: this.props.match.params._id }\r\n        }))\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            detail,\r\n            recommend\r\n        } = this.props;\r\n        console.log(recommend)\r\n\r\n        return (\r\n            <div>\r\n                <Head\r\n                    title=\"电影详情\"\r\n                    show={true}\r\n                    search={true}\r\n                    pop={true}\r\n                />\r\n                <div style={{ width: \"7.5rem\", }}>\r\n                    <video src={detail.video}\r\n                        controls\r\n                        preload=\"true\"\r\n                        style={{\r\n                            width: \"100%\",\r\n                            height: \"4.2rem\",\r\n                            diaplay: \"inline-block\",\r\n                        }}></video>\r\n                </div>\r\n                <Item detail={detail} />\r\n                <p className=\"tuijian\">相关电影推荐</p>\r\n                <List movies={recommend} />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Detail)"],"sourceRoot":""}