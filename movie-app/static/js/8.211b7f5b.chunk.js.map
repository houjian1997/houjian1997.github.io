{"version":3,"sources":["../node_modules/@babel/runtime/helpers/esm/defineProperty.js","assets/tx.jpg","scripts/components/uploadavatar/index.js","scripts/views/mine/index.js"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","module","exports","UploadAvatar","inpHandelClick","inp","click","uploadAvatar","file","files","data","FormData","append","axios","url","method","contentType","processData","then","res","code","setState","avatar","replace","state","get","params","token","sessionStorage","type","require","this","props","index","className","src","alt","onClick","ref","el","onChange","React","Component","alert","Modal","prompt","Mine","onDock","d","confirm","docked","history","push","cancel","submit","post","handleClick","text","onPress","cid","tabs","name","icon","sidebar","map","tab","Item","thumb","style","fontSize","display","width","height","color","zIndex","onLeftClick","minHeight","document","documentElement","clientHeight","contentStyle","textAlign","paddingTop","sidebarStyle","border","size"],"mappings":"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","file":"static/js/8.211b7f5b.chunk.js","sourcesContent":["export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","module.exports = __webpack_public_path__ + \"static/media/tx.cfdabf64.jpg\";","import React from \"react\";\r\nimport axios from \"&/axios\";\r\nimport \"./index.scss\";\r\n\r\nexport default class UploadAvatar extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            avatar: \"\"\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        axios.get(\"/react/getAvatar\", {\r\n            params: { token: sessionStorage.token }\r\n        }).then(res => {\r\n            if (res.data.type == 1) {\r\n                this.setState({\r\n                    avatar: res.data.avatar.replace(/public/, \"https://www.houjian123.com:1900/\")\r\n\r\n                })\r\n            } else {\r\n                this.setState({\r\n                    avatar: require(\"@/assets/tx.jpg\")\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    inpHandelClick = () => {\r\n        this.inp.click()\r\n    }\r\n\r\n    uploadAvatar = () => {\r\n        const file = this.inp.files[0];\r\n        const data = new FormData();\r\n        data.append(\"avatar\", file);\r\n        axios({\r\n            url: \"/react/uploadAvatar\",\r\n            method: \"post\",\r\n            data: data,\r\n            contentType: false,\r\n            processData: false,\r\n        }).then(res => {\r\n            if (res.data.code == 200) {\r\n                this.setState({\r\n                    avatar: res.data.avatar.replace(/public/, \"https://www.houjian123.com:1900/\")\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    render() {\r\n        if (this.props.index == 1) {\r\n            this.inpHandelClick()\r\n        }\r\n\r\n        return (\r\n            <div className=\"tx\">\r\n                <div className=\"avatar\">\r\n                    <img\r\n                        src={this.state.avatar}\r\n                        alt=\"\"\r\n                        onClick={this.inpHandelClick}\r\n                    />\r\n                    <input\r\n                        type=\"file\"\r\n                        ref={el => this.inp = el}\r\n                        onChange={this.uploadAvatar}\r\n                    />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","import React from \"react\";\r\nimport UploadAvatar from \"~/components/uploadavatar/index\";\r\nimport { WhiteSpace, Drawer, List, NavBar, Icon, Modal, Toast } from \"antd-mobile\";\r\nimport { history } from \"&/history\";\r\nimport axios from \"&/axios\";\r\nimport \"./index.scss\";\r\n\r\nconst alert = Modal.alert;\r\nconst prompt = Modal.prompt;\r\n\r\nexport default class Mine extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            docked: false,\r\n            tabs: [\r\n                { name: \"进入首页\", icon: \"iconfont icon-gerenzhongxin\" },\r\n                { name: \"上传头像\", icon: \"iconfont icon-shangchuantouxiang\" },\r\n                { name: \"修改密码\", icon: \"iconfont icon-xiugaimima\" },\r\n                { name: \"我的订单\", icon: \"iconfont icon-favorite\" },\r\n                { name: \"退出登录\", icon: \"iconfont icon-exit1\" },\r\n            ],\r\n            index: 0,\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (!sessionStorage.token) {\r\n            history.push(\"/login\")\r\n        }\r\n    }\r\n\r\n    onDock = (d) => {\r\n        this.setState({\r\n            [d]: !this.state[d],\r\n\r\n            // 每次点击开关的时候  初始化index = 0\r\n\r\n            index: 0\r\n        });\r\n    }\r\n\r\n    confirm = () => {\r\n        sessionStorage.token = \"\";\r\n        this.setState({\r\n            docked: false\r\n        });\r\n        history.push(\"/index/home\")\r\n    }\r\n\r\n    cancel = () => {\r\n        this.setState({\r\n            docked: false\r\n        })\r\n    }\r\n\r\n    submit = (value) => {\r\n        axios.post(\"/react/editPwd\", {\r\n            token: sessionStorage.token,\r\n            value\r\n        }).then(res => {\r\n            if (res.data.type == 1) {\r\n                this.setState({\r\n                    docked: false\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    handleClick = (index) => {\r\n        switch (index) {\r\n            case 0: {\r\n                history.push(\"/index/home\")\r\n            };\r\n                break;\r\n            case 1: {\r\n                // 上传头像\r\n                this.setState({\r\n\r\n                    // 每次点击上传头像的时候  修改index = 1  通过props传给子组件  \r\n\r\n                    index: 1,\r\n                    docked: false\r\n                })\r\n            };\r\n                break;\r\n            case 2: {\r\n                // 修改密码\r\n                prompt('请输入新密码', '', [\r\n                    { text: '取消', onPress: () => this.cancel() },\r\n                    { text: '提交', onPress: (value) => this.submit(value) },\r\n                ], 'default', '')\r\n            };\r\n                break;\r\n            case 3: {\r\n                // 查看订单\r\n                if (sessionStorage.cid) {\r\n                    history.push(\"/order/\" + sessionStorage.cid);\r\n                }\r\n                this.setState({\r\n                    docked: false\r\n                })\r\n            };\r\n                break;\r\n            case 4: {\r\n                // 退出登录\r\n                alert(\"确定要退出登录？\", '', [\r\n                    { text: '取消', onPress: () => this.cancel() },\r\n                    { text: '确定', onPress: () => this.confirm() },\r\n                ])\r\n            };\r\n                break;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const sidebar = (<List>\r\n            {this.state.tabs.map((tab, index) => {\r\n                return (<List.Item\r\n                    key={index}\r\n                    thumb={<span\r\n                        className={tab.icon}\r\n                        style={{\r\n                            fontSize: \"0.2rem\",\r\n                            display: \"block\",\r\n                            width: \"0.3rem\",\r\n                            height: \"0.3rem\",\r\n                            color: \"#fff\",\r\n                            zIndex: \"1000\",\r\n                        }}\r\n                    ></span>}\r\n                    onClick={() => this.handleClick(index)}\r\n                >{tab.name}</List.Item>);\r\n            })}\r\n        </List>);\r\n\r\n        return (\r\n            <div className=\"boss\">\r\n                <NavBar\r\n                    icon={<Icon type=\"ellipsis\" />}\r\n                    onLeftClick={() => this.onDock('docked')}\r\n                >\r\n                    我的\r\n                </NavBar>\r\n\r\n                <Drawer\r\n                    className=\"my-drawer\"\r\n                    style={{ minHeight: document.documentElement.clientHeight }}\r\n                    contentStyle={{ color: '#A6A6A6', textAlign: 'center', paddingTop: 42 }}\r\n                    sidebarStyle={{ border: '1px solid #ddd' }}\r\n                    sidebar={sidebar}\r\n                    docked={this.state.docked}\r\n                >\r\n                    <div className=\"banner\">\r\n                        <UploadAvatar index={this.state.index} />\r\n                    </div>\r\n\r\n                    <WhiteSpace size=\"lg\" />\r\n                    <div className=\"order-box\">\r\n                        <p>我的订单</p>\r\n                        <div className=\"left\">\r\n                            <div className=\"big\">\r\n                                <span className=\"iconfont icon-dianying\"></span>\r\n                            </div>\r\n                            <p>电影</p>\r\n                        </div>\r\n                        <div className=\"right\">\r\n                            <div className=\"big\">\r\n                                <span className=\"iconfont icon-shangcheng\"></span>\r\n                            </div>\r\n                            <p>商城</p>\r\n                        </div>\r\n                    </div>\r\n                    <WhiteSpace size=\"lg\" />\r\n                    <div className=\"bottom-box\">\r\n                        <ul>\r\n                            <li>\r\n                                <span>在线观影</span>\r\n                                <span className=\"iconfont icon-jiantou-right\"></span>\r\n                            </li>\r\n                            <li>\r\n                                <span>优惠券</span>\r\n                                <span className=\"iconfont icon-jiantou-right\"></span>\r\n                            </li>\r\n                            <li>\r\n                                <span>折扣卡</span>\r\n                                <span className=\"iconfont icon-jiantou-right\"></span>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                </Drawer>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\n"],"sourceRoot":""}