{"version":3,"sources":["scripts/components/head/index.js","scripts/views/order/index.js"],"names":["Item","Popover","myImg","src","className","alt","Head","gotoSearch","history","push","back","show","title","go","props","dispatch","clearSearchList","onSelect","opt","setState","visible","selected","value","showActionSheet","handleVisibleChange","BUTTONS","ActionSheet","showActionSheetWithOptions","options","cancelButtonIndex","length","destructiveButtonIndex","message","maskClosable","buttonIndex","clicked","state","this","search","pop","mode","icon","type","rightContent","key","style","marginRight","onClick","mask","overlayClassName","overlayStyle","color","overlay","data-seed","whiteSpace","align","overflow","adjustY","adjustX","offset","onVisibleChange","height","padding","display","alignItems","backgroundColor","onLeftClick","React","Component","connect","searchList","getIn","Order","onChange","val","getOrderDetail","url","params","cid","match","sessionStorage","orderDetail","location","snackList","dealList","index","URLSearchParams","get","snack","imageUrl","replace","recommendPersonNum","price","wrap","extra","width","minWidth","showNumber","max","min","clear","placeholder","ref","el","autoFocusInst","size","position","bottom","left"],"mappings":"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","file":"static/js/11.99418455.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { NavBar, Icon, Popover, ActionSheet } from 'antd-mobile';\r\nimport PropTypes from \"prop-types\";\r\nimport { history } from \"&/history\";\r\nimport { connect } from \"react-redux\";\r\nimport { clearSearchList } from \"~/actions/index\";\r\nimport \"./index.scss\";\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        searchList: state.getIn([\"data\", \"searchList\"])\r\n    }\r\n}\r\n\r\nconst Item = Popover.Item;\r\nconst myImg = src => <img src={`https://gw.alipayobjects.com/zos/rmsportal/${src}.svg`} className=\"am-icon am-icon-xs\" alt=\"\" />;\r\n\r\nclass Head extends React.Component {\r\n\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            visible: false,\r\n            selected: '',\r\n        }\r\n    }\r\n\r\n    gotoSearch = () => {\r\n        history.push(\"/search\")\r\n    }\r\n\r\n    back = (show, title) => {\r\n        if (show) {\r\n            history.go(-1)\r\n        }\r\n\r\n        if (title === \"搜索\") {\r\n            this.props.dispatch(clearSearchList())\r\n        }\r\n    }\r\n\r\n    onSelect = (opt) => {\r\n        this.setState({\r\n            visible: false,\r\n            selected: opt.props.value,\r\n        })\r\n        // console.log(opt.props.value)\r\n        if (opt.props.value == \"scan\") {\r\n            history.push(\"/scan\")\r\n        } else if (opt.props.value == \"login\") {\r\n            history.push(\"/login\")\r\n        } else if (opt.props.value == \"photo\") {\r\n            this.showActionSheet()\r\n        }\r\n    }\r\n\r\n    handleVisibleChange = (visible) => {\r\n        this.setState({\r\n            visible,\r\n        })\r\n    }\r\n\r\n    showActionSheet = () => {\r\n        const BUTTONS = [\"从手机相册选取\", \"立即拍照\"];\r\n        ActionSheet.showActionSheetWithOptions({\r\n            options: BUTTONS,\r\n            cancelButtonIndex: BUTTONS.length - 1,\r\n            destructiveButtonIndex: BUTTONS.length - 2,\r\n            message: '拍照',\r\n            maskClosable: true,\r\n            'data-seed': 'logId',\r\n        },\r\n            (buttonIndex) => {\r\n                this.setState({ clicked: BUTTONS[buttonIndex] });\r\n            });\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            title,\r\n            show,\r\n            search,\r\n            pop\r\n        } = this.props;\r\n        return (\r\n            <div>\r\n                <NavBar\r\n                    mode=\"dark\"\r\n                    icon={show && <Icon type=\"left\" />}\r\n                    rightContent={[\r\n                        search && <Icon\r\n                            key=\"0\"\r\n                            type=\"search\"\r\n                            style={{ marginRight: '16px' }}\r\n                            onClick={this.gotoSearch}\r\n                        />,\r\n                        pop && <Popover\r\n                            mask\r\n                            key={1}\r\n                            overlayClassName=\"fortest\"\r\n                            overlayStyle={{ color: 'currentColor' }}\r\n                            visible={this.state.visible}\r\n                            overlay={[\r\n                                (<Item key=\"4\" value=\"scan\" icon={myImg('tOtXhkIWzwotgGSeptou')} data-seed=\"logId\">扫一扫</Item>),\r\n                                (<Item key=\"5\" value=\"photo\" icon={myImg('PKAgAqZWJVNwKsAJSmXd')} style={{ whiteSpace: 'nowrap' }}>拍照</Item>),\r\n                                (<Item key=\"6\" value=\"login\" icon={myImg('uQIYTFeRrjPELImDRrPt')}>\r\n                                    <span style={{ marginRight: 5 }}>登录</span>\r\n                                </Item>),\r\n                            ]}\r\n                            align={{\r\n                                overflow: { adjustY: 0, adjustX: 0 },\r\n                                offset: [-10, 0],\r\n                            }}\r\n                            onVisibleChange={this.handleVisibleChange}\r\n                            onSelect={this.onSelect}\r\n                        >\r\n                            <div style={{\r\n                                height: '100%',\r\n                                padding: '0 15px',\r\n                                marginRight: '-15px',\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                            }}\r\n                            >\r\n                                <Icon type=\"ellipsis\" />\r\n                            </div>\r\n                        </Popover>\r\n                    ]}\r\n                    style={{ backgroundColor: \"#d3544d\" }}\r\n                    onLeftClick={() => this.back(show, title)}\r\n                >{title}</NavBar>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nHead.propTypes = {\r\n    title: PropTypes.string,\r\n    show: PropTypes.bool,\r\n    search: PropTypes.bool,\r\n    pop: PropTypes.bool\r\n}\r\n\r\nexport default connect(mapStateToProps)(Head)","import React from \"react\";\r\nimport Head from \"~/components/head/index\";\r\nimport \"./index.scss\";\r\nimport { connect } from \"react-redux\";\r\nimport { getOrderDetail } from \"~/actions/index\";\r\nimport { Button, List, Stepper, InputItem } from \"antd-mobile\";\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        orderDetail: state.getIn([\"data\", \"orderDetail\"])\r\n    }\r\n}\r\n\r\nclass Order extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            val: 1\r\n        };\r\n    }\r\n\r\n    onChange = (val) => {\r\n        this.setState({ val });\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.dispatch(getOrderDetail(\r\n            {\r\n                url: \"/react/getOrderDetail\",\r\n                params: {\r\n                    cid: this.props.match.params.cid\r\n                }\r\n            }\r\n        ))\r\n        sessionStorage.cid = this.props.match.params.cid;\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            orderDetail,\r\n            location\r\n        } = this.props;\r\n\r\n        const snackList = orderDetail.dealList && orderDetail.dealList.dealList;\r\n        const index = new URLSearchParams(location.search).get(\"index\");\r\n        const snack = snackList && snackList[index];\r\n\r\n        return (\r\n            <div>\r\n                <Head title=\"确认订单\" show={true} search={true} pop={true} />\r\n                <div className=\"order-msg\">\r\n                    <dl>\r\n                        <dt>\r\n                            <img\r\n                                src={snack && snack.imageUrl && snack.imageUrl.replace(\"w.h\", \"85.119\")}\r\n                                alt=\"\"\r\n                            />\r\n                        </dt>\r\n                        <dd>\r\n                            <ul>\r\n                                <li className=\"title-li\">\r\n                                    {snack && snack.recommendPersonNum == 1 && <span className=\"icon-span\">单人</span>}\r\n                                    {snack && snack.recommendPersonNum == 2 && <span className=\"icon-span\">双人</span>}\r\n                                    {snack && snack.recommendPersonNum == 3 && <span className=\"icon-span\">三人</span>}\r\n                                    {snack && snack.title}\r\n                                </li>\r\n                                <li className=\"tip-li\">有效期：购买后30天内有效</li>\r\n                                <li className=\"time-li\">可用时间：00:00-24:00</li>\r\n                                <li className=\"price-li\">{snack && snack.price}元</li>\r\n                            </ul>\r\n                        </dd>\r\n                    </dl>\r\n                </div>\r\n                <List>\r\n                    <List.Item\r\n                        wrap\r\n                        extra={\r\n                            <Stepper\r\n                                style={{ width: '100%', minWidth: '100px' }}\r\n                                showNumber\r\n                                max={10}\r\n                                min={1}\r\n                                value={this.state.val}\r\n                                onChange={this.onChange}\r\n                            />}\r\n                    >\r\n                        数量\r\n                        </List.Item>\r\n                </List>\r\n                <div className=\"order-tip\">\r\n                    <p>提示信息</p>\r\n                    <p>温馨提示：特殊节假日期间，卖品兑换原则以各影城公示为准</p>\r\n                    <p>使用时间：请在影城卖品部营业时间兑换。</p>\r\n                </div>\r\n                <div className=\"order-tel\">\r\n                    <List>\r\n                        <InputItem\r\n                            clear\r\n                            placeholder=\"请输入手机号\"\r\n                            ref={el => this.autoFocusInst = el}\r\n                        >手机号：</InputItem>\r\n                    </List>\r\n                </div>\r\n                <div className=\"order-total\">\r\n                    <span>小计</span>\r\n                    <span>￥</span>\r\n                    <span></span>\r\n                </div>\r\n                <Button\r\n                    size=\"large\"\r\n                    type=\"warning\"\r\n                    style={{\r\n                        position: \"fixed\",\r\n                        bottom: \"0.1rem\",\r\n                        left: \"0.2rem\",\r\n                        width: \"7.08rem\"\r\n                    }}\r\n                >确认支付</Button>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Order)\r\n"],"sourceRoot":""}